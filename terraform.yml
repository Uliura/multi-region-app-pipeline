---
steps:
  - task: TerraformTaskV2@2
    inputs:
      provider: "azurerm"
      command: "init"
      backendServiceArm: 'StudySubscription(a4634be0-8c57-4abe-9c19-60e1f7843718)'
      backendAzureRmResourceGroupName: "AzureDevOps"
      backendAzureRmStorageAccountName: "storadgeforazuredevops"
      backendAzureRmContainerName: "tfstate"
      backendAzureRmKey: "terraform.tfstate"
  - task: TerraformTaskV2@2
    inputs:
      provider: "azurerm"
      command: "plan"
      commandOptions: '-out=tfplan'
      environmentServiceNameAzureRM: 'StudySubscription(a4634be0-8c57-4abe-9c19-60e1f7843718)'
  - task: TerraformTaskV2@2
    inputs:
      provider: "azurerm"
      command: "apply"
      commandOptions: "tfplan"
      environmentServiceNameAzureRM: 'StudySubscription(a4634be0-8c57-4abe-9c19-60e1f7843718)'
